<!DOCTYPE html><html lang="en"> <head><title>Hi, I'm Nhân - Enable italic text inside vim inside tmux inside&nbsp;gnome-terminal</title><meta charset="utf-8"><link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Hi, I'm Nhân Full Atom Feed"><link href="/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="Hi, I'm Nhân Atom Feed"><link href="/feeds/tutorials.atom.xml" type="application/atom+xml" rel="alternate" title="Hi, I'm Nhân Categories Atom Feed"><meta name="tags" content="linux"><meta name="tags" content="vim"></head> <body id="index" class="home"> <header id="banner" class="body"> <h1><a href="https://hi.imnhan.com/">Hi, I'm Nhân <strong>and this is my humble corner on the interwebs.</strong></a></h1> </header><!-- /#banner --> <nav id="menu"><ul> <li><a href="/">Blog</a></li> <li><a href="https://hi.imnhan.com/about/">About</a></li> <li><a href="https://hi.imnhan.com/random-notes/">Random&nbsp;notes</a></li> <li><a href="https://hi.imnhan.com/category/misc/">misc</a></li> <li><a href="https://hi.imnhan.com/category/posts/">posts</a></li> <li><a href="https://hi.imnhan.com/category/side-projects/">side projects</a></li> <li class="active"><a href="https://hi.imnhan.com/category/tutorials/">tutorials</a></li> </ul></nav><!-- /#menu --> <section id="content" class="body"> <header> <h2 class="entry-title"> <a href="https://hi.imnhan.com/posts/enable-italic-text-vim-tmux-gnome-terminal/" rel="bookmark" title="Permalink to Enable italic text inside vim inside tmux inside gnome-terminal">Enable italic text inside vim inside tmux inside&nbsp;gnome-terminal</a></h2> </header> <footer class="post-info"> <time class="published" datetime="2014-08-02T16:46:00+07:00"> Sat 02 August 2014 </time> <address class="vcard author"> By <a class="url fn" href="https://hi.imnhan.com/author/bui-thanh-nhan/">Bùi Thành Nhân</a> </address> <div class="category"> Category: <a href="https://hi.imnhan.com/category/tutorials/">tutorials</a> </div> <div class="tags"> Tags: <a href="https://hi.imnhan.com/tag/linux/">linux</a> <a href="https://hi.imnhan.com/tag/vim/">vim</a> </div> </footer><!-- /.post-info --> <div class="entry-content"> <p><strong>Update</strong>: As <code>egmont</code> pointed out in the comments: setting <code>TERM=xterm</code> inside tmux is discouraged and will cause wrong behavior in some programs. Changing all instances of <code>xterm-256color</code> to <code>screen-256color</code> in this tutorial should work, but I&#8217;m no longer using gnome-terminal so I can&#8217;t test that. I&#8217;m now a <span class="caps">KDE</span> convert by the way; italic text Just Works<sup>tm</sup> with Konsole. Neat,&nbsp;eh?</p> <p>It has bothered me for a while what I can&#8217;t get terminal vim to display <em>italic</em> text. It might seem trivial but it makes a world of difference when I&#8217;m editing Markdown or <span class="caps">HTML</span>. Here&#8217;s what gvim looks&nbsp;like:</p> <p><img alt src="/images/italic_01_gvim.png"></p> <p>Neat, right? This is what terminal vim&nbsp;shows:</p> <p><img alt src="/images/italic_02_vim.png"></p> <p>I don&#8217;t know about you, but the second one looks catastrophically messy and counterintuitive to me. Let&#8217;s change that. My current setup is terminal vim running inside a tmux session on gnome-terminal. Let&#8217;s go through these&nbsp;things.</p> <h2>gnome-terminal</h2> <p>Note that older versions of <code>gnome-terminal</code> do not support italic text. To check if your terminal does support it, run this&nbsp;command:</p> <div class="highlight"><pre><span></span><code>$ <span class="nb">echo</span> -e <span class="s2">&quot;\e[3m foo \e[23m&quot;</span>
</code></pre></div> <p>If your version of gnome-terminal supports it, an italic <em>foo</em> will appear. If not, upgrade it!&nbsp;:)</p> <h2>vim</h2> <p>You may have noticed: <code>[3m</code> and <code>[23m</code> are the special sequences to start and stop printing italic text. Unfortunately, vim doesn&#8217;t care about those. It expects <code>sitm</code> and <code>ritm</code> instead. We&#8217;ll need to map them manually. Simply use these&nbsp;commands:</p> <div class="highlight"><pre><span></span><code><span class="c1"># Download a custom terminfo that defines sitm and ritm</span>
$ wget https://gist.githubusercontent.com/sos4nt/3187620/raw/8e13c1fec5b72d415ed2917590348451de5f8e58/xterm-256color-italic.terminfo
<span class="c1"># Compile it</span>
$ tic xterm-256color-italic.terminfo
<span class="c1"># Activate xterm-256color-italic.terminfo automatically</span>
<span class="c1"># (edit filename accordingly if you&#39;re using another shell)</span>
$ <span class="nb">echo</span> <span class="s1">&#39;export TERM=xterm-256color-italic&#39;</span> &gt;&gt; ~/.bashrc
</code></pre></div> <p>Open a new terminal window and try the first command again. You should now see an italic <em>foo</em>. If not, I can&#8217;t help you any further&nbsp;:P</p> <h2>tmux</h2> <p>The only reason I use terminal vim instead of gvim is tmux integration, therefore I almost always run vim inside a tmux session. Unfortunately tmux does some weird things to your terminal, one of them is altering the <code>$TERM</code> environment variable. When we open a tmux session, it will typically reset <code>$TERM</code> to <code>screen-256color</code> or something like&nbsp;that.</p> <p>If you did the previous step, the <code>export</code> command in your <code>.bashrc</code> should have overridden tmux&#8217;s <code>$TERM</code> value. If for some reason it doesn&#8217;t work, you can directly tell tmux to use the correct value. Add this line to <code>~/.tmux.conf</code>:</p> <div class="highlight"><pre><span></span><code><span class="err">set -g default-terminal &quot;xterm-256color-italic&quot;</span>
</code></pre></div> <h2>More on&nbsp;vim</h2> <p>If you still can&#8217;t see any italic text in a markdown file, it might be because your colorscheme deliberately disables it. Try using another colorscheme (I highly recommend <a href="http://ethanschoonover.com/solarized">solarized</a>). You can also check if your markdown syntax plugin does use italics; I&#8217;m currently using <a href="https://github.com/tpope/vim-markdown">Tim Pope&#8217;s markdown plugin</a> and it works&nbsp;great!</p> <h2>References:</h2> <ol> <li><a href="http://superuser.com/questions/204743/terminal-that-supports-ansi-italic-escape-code">Terminal that supports <span class="caps">ANSI</span> italic escape&nbsp;code?</a></li> <li><a href="http://stackoverflow.com/a/21077380">gnome-terminal&#8217;s italic escape&nbsp;codes</a></li> <li><a href="https://alexpearce.me/2014/05/italics-in-iterm2-vim-tmux/">Enabling italic fonts in iTerm2, tmux, and&nbsp;vim</a></li> </ol> </div><!-- /.entry-content --> </section> <footer id="contentinfo" class="body"> <address id="about" class="vcard body"> Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>. </address><!-- /#about --> </footer><!-- /#contentinfo --> </body> </html>