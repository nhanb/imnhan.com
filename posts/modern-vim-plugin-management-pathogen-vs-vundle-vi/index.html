<!DOCTYPE html><html> <head><meta charset="utf-8"><title>Quản lý plugin trong vim - Pathogen vs Vundle | Hi, I'm Nhân</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="/theme/css/zenburn.css"><link rel="stylesheet" href="/theme/css/main.css"><link rel="stylesheet" href="/theme/css/article.css"><meta property="og:title" content="Quản lý plugin trong vim - Pathogen vs Vundle"><meta property="og:description" content="Dành cho những ai lười đọc: Vundle tốt hơn Pathogen. Bài viết này sẽ giải thich cách hoạt động của plugin trong vim và cách quản lý plugins bằng những công cụ được cộng đồng phát triển: Pathogen hoặc Vundle. Trong bài viết này tôi chỉ làm hướng dẫn cụ..."><meta property="og:image" content="https://hi.imnhan.com/images/keyboard-warrior.jpg"></head> <!--

Why hello there, source viewer. Here's a dragon for no particular reason:

       ^                       ^
       |\   \        /        /|
      /  \  |\__  __/|       /  \_
     / /\ \ \ _ \/ _ /      /    \_
    / / /\ \ {*}\/{*}      /  / \ \_
    | | | \ \( (00) )     /  // |\ \_
    | | | |\ \(V""V)\    /  / | || \|
    | | | | \ |^--^| \  /  / || || ||
   / / /  | |( WWWW__ \/  /| || || ||
  | | | | | |  \______\  / / || || ||
  | | | / | | )|______\ ) | / | || ||
  / / /  / /  /______/   /| \ \ || ||
 / / /  / /  /\_____/  |/ /__\ \ \ \ \_
 | | | / /  /\______/    \   \__| \ \ \_
 | | | | | |\______ __    \_    \__|_| \_
 | | ,___ /\______ _  _     \_       \  |
 | |/    /\_____  /    \      \__     \ |    /\_
 |/ |   |\______ |      |        \___  \ |__/  \_
 v  |   |\______ |      |            \___/     |
    |   |\______ |      |                    __/
     \   \________\_    _\               ____/
   __/   /\_____ __/   /   )\_,      _____/
  /  ___/  \____/  ___/___)    \______/
  VVV  V        VVV  V

(ripped off from http://www.retrojunkie.com/asciiart/myth/dragons.htm)

--> <body> <div id="main"> <header role="banner"> <h1 id="site-name"><a href="/">Hi, I'm Nhân</a></h1> <p id="site-subtitle">and this is my humble corner on the interwebs.</p> </header> <nav role="navigation"> <ul class="navbar" id="left-navbar"> <li><a href="/">Blog</a></li> <li><a href="https://hi.imnhan.com/about/">About</a></li> <li><a href="https://hi.imnhan.com/projects/">Projects</a></li> </ul> <ul class="navbar" id="right-navbar"> <li><a href="/feeds/atom.xml">Feed</a></li> </ul> <div class="clearfix"> </nav> <div id="content"> <div class="article-content"> <article> <h1 class="article-title"> Quản lý plugin trong vim - Pathogen vs Vundle </h1> <time datetime="2013-05-13 12:00:00+07:00"> May 13, 2013 </time> <p>Dành cho những ai lười đọc: Vundle tốt hơn&nbsp;Pathogen.</p> <p>Bài viết này sẽ giải thich cách hoạt động của plugin trong vim và cách quản lý plugins bằng những công cụ được cộng đồng phát triển: Pathogen hoặc Vundle. Trong bài viết này tôi chỉ làm hướng dẫn cụ thể cho máy chạy Linux và đã cài sẵn git. Nếu không rõ cách cài git, bạn có thể hỏi&nbsp;Google.</p> <h1>Cấu trúc vim&nbsp;plugins</h1> <p>Một plugin trong vim đơn giản chỉ là 1 nhóm các files có nhiệm vụ thay đổi hoặc thêm tính năng cho vim. Theo mặc định thì vim sẽ tìm trong home folder của người dùng (chính là <code>/home/username</code> hoặc có thể viết tắt là <code>~</code>):</p> <h2>~/.vimrc&nbsp;(file)</h2> <p>Đây là nơi bạn tùy biến mọi thứ trong vim: căn lề, gán phím, vân vân&#8230; Bài viết này sẽ không đề cập chi tiết cách tùy biến như thế nào. Lúc này bạn chỉ cần biết là nó có 1 file&nbsp;đó.</p> <p>Để tiện quản lý, chúng ta hãy đem file này vào folder <code>~/.vim</code>. Hãy tạo một file <code>~/.vim/vimrc</code> rồi dẫn symlink trỏ vào&nbsp;nó:</p> <div class="highlight"><pre><span></span><code>touch ~/.vim/vimrc
ln -s ~/.vim/vimrc ~/.vimrc
</code></pre></div> <h2>~/.vim&nbsp;(directory)</h2> <p>Folder này sẽ chứa một vài folder con khác. Ví&nbsp;dụ:</p> <ul> <li>autoload</li> <li>ftplugin</li> <li>colors</li> <li>syntax</li> <li>doc</li> </ul> <p>Mỗi folder đều có một nhiệm vụ nhất định: <code>colors</code> chứa colorschemes, <code>syntax</code> cho phép bạn tùy chỉnh tô màu code, <code>doc</code> chứa tài liệu hướng dẫn&#8230; Một plugin thường sẽ chèn nhiều file vào nhiều folder ở đây. Hãy lấy plugin <a href="https://github.com/majutsushi/tagbar">tagbar</a> làm ví dụ: ta sẽ cài nó bằng cách copy hết nội dung của nó vào <code>~/.vim</code>:</p> <div class="highlight"><pre><span></span><code>~/.vim
├── autoload
│   └── tagbar.vim
├── doc
│   ├── tagbar.txt
│   └── tags
├── plugin
│   └── tagbar.vim
├── README
└── syntax
    └── tagbar.vim
</code></pre></div> <p>Everything looks good. Just copy and paste the whole thing, nice and simple. How about adding a decent colorscheme? Let&#8217;s install <a href="https://github.com/altercation/vim-colors-solarized">solarized</a>:</p> <div class="highlight"><pre><span></span><code>├── autoload
│   └── togglebg.vim
├── bitmaps
│   └── togglebg.png
├── colors
│   └── solarized.vim
├── doc
│   ├── solarized.txt
│   └── tags
└── README.mkd
</code></pre></div> <p>Wait, <code>doc/tags</code> is already there. Ok, no problem! Let&#8217;s just copy the content of solarized&#8217;s tags file and paste it into the existing one. Now we&nbsp;have:</p> <div class="highlight"><pre><span></span><code>~/.vim
├── autoload
│   ├── tagbar.vim
│   └── togglebg.vim
├── bitmaps
│   └── togglebg.png
├── colors
│   └── solarized.vim
├── doc
│   ├── solarized.txt
│   ├── tagbar.txt
│   └── tags
├── plugin
│   └── tagbar.vim
├── README
├── README.mkd
└── syntax
    └── tagbar.vim
</code></pre></div> <p>Now what if you you decide that solarized sucks and want to get rid of it? Good luck finding which file belongs to which plugin. Oh, don&#8217;t forget the merged <code>doc/tags</code> file! Now imagine you have 20-30 plugins installed (which is normal, by the way). It&#8217;s not a pretty sight now, is&nbsp;it?</p> <h1>Pathogen to the&nbsp;rescue!</h1> <p>The legendary Tim Pope came up with a genius solution: <a href="https://github.com/tpope/vim-pathogen">pathogen</a>. Now let&#8217;s install it like any regular plugin (I&#8217;ve omitted the <span class="caps">README</span>):</p> <div class="highlight"><pre><span></span><code>~/.vim
└── autoload
    └── pathogen.vim
</code></pre></div> <p>Put this at the beginning of your <code>~/.vimrc</code>:</p> <div class="highlight"><pre><span></span><code>execute pathogen#infect<span class="p">()</span>
</code></pre></div> <p>Create this directory: <code>~/.vim/bundle</code>. To install tagbar and solarized, just create their own directories&nbsp;here:</p> <div class="highlight"><pre><span></span><code>path
├── autoload
│   └── pathogen.vim
└── bundle
    ├── tagbar
    │   ├── autoload
    │   │   └── tagbar.vim
    │   ├── doc
    │   │   ├── tagbar.txt
    │   │   └── tags
    │   ├── plugin
    │   │   └── tagbar.vim
    │   ├── README
    │   └── syntax
    │       └── tagbar.vim
    └── vim-colors-solarized
        ├── autoload
        │   └── togglebg.vim
        ├── bitmaps
        │   └── togglebg.png
        ├── colors
        │   └── solarized.vim
        ├── doc
        │   ├── solarized.txt
        │   └── tags
        └── README.mkd
</code></pre></div> <p>What Pathogen does is that it adds every directory inside <code>bundle</code> into vim&#8217;s &#8220;runtimepath&#8221;. It means that each folder here can be considered a new <code>.vim</code> folder where vim looks for appropriate configuration files. The plugins are now isolated so removing or updating them becomes trivial: just remove or update its own&nbsp;directory.</p> <h1>Pathogen +&nbsp;Git</h1> <p>Everything goes to the cloud these days, and certainly your vim setup should as well. If you haven&#8217;t created a <a href="https://github.com">Github</a> account, do it now. Create an empty repository with any name you want (mine is <code>.vim</code>). Don&#8217;t commit yet. Create a file: <code>~/.vim/.gitignore</code>, add these lines to its&nbsp;content:</p> <div class="highlight"><pre><span></span><code>bundle/
.netrwhist
</code></pre></div> <p>.netrwhist is a local file generated by vim that is better off ignored. We also ignore bundle directory because the plugins will be included as git submodules (google <em>git submodule</em> for details). Remember to delete everything inside <code>bundle/</code>, because we will install the plugins again with&nbsp;git.</p> <p>Git init, commit and push to your github repo: (on the <em>git remote add&#8230;</em> line, replace <code>nhanb</code> with your github username, <code>.vim</code> with your repo&nbsp;name)</p> <div class="highlight"><pre><span></span><code><span class="nb">cd</span> ~/.vim
git init
git add .
git commit -m <span class="s1">&#39;init&#39;</span>

git remote add origin https://github.com/nhanb/.vim.git
git push -u origin master
</code></pre></div> <p>Everytime you edit anything in your .vim directory, remember to commit the changes and push to&nbsp;github:</p> <div class="highlight"><pre><span></span><code>git add . 
git commit -m <span class="s1">&#39;some message here&#39;</span>
git push
</code></pre></div> <p>If you want to install a plugin, see if it has a git repo (9 out of 10 times it has a github repo). Find its git url and add to your .vim as a&nbsp;submodule:</p> <div class="highlight"><pre><span></span><code><span class="nb">cd</span> ~/.vim
git add submodule https://github.com/majutsushi/tagbar.git bundle/tagbar
git add submodule https://github.com/altercation/vim-colors-solarized.git bundle/solarized
git submodule update --init
git submodule foreach git pull origin master
</code></pre></div> <p>When you need to update your plugins, just run the last line to make git pull updates for all&nbsp;plugins. </p> <p>Here&#8217;s the awesome part: when you&#8217;re using a whole new computer and want to get all your vim settings from the cloud, simply clone your github repo, make a symlink for .vimrc and pull all&nbsp;plugins:</p> <div class="highlight"><pre><span></span><code><span class="nb">cd</span> ~
git clone https://github.com/nhanb/.vim.git .vim
ln -s ~/.vim/vimrc ~/.vimrc
<span class="nb">cd</span> .vim
git submodule update --init <span class="o">&amp;&amp;</span> git submodule foreach git pull origin master
</code></pre></div> <p>Now you must be really excited, no? Git does everything for you: upload/download, add plugins, update plugins <em>and</em> remove plugins&#8230; There must be some simple git command to remove a submodule,&nbsp;right?</p> <p><strong><span class="caps">NO</span></strong>. Sadly, no. To remove a git submodule, you&#8217;ll need to manually edit 2 git files and remove the folder by hand. See <a href="http://stackoverflow.com/questions/1260748/how-do-i-remove-a-git-submodule">this Stackoverflow question</a> for detailed&nbsp;instructions.</p> <h1>Vundle, the new cool&nbsp;kid</h1> <p>This time let&#8217;s start fresh: remove all submodules and pathogen. Your bundle folder should be now empty. Clone <a href="https://github.com/gmarik/vundle">Vundle</a>:</p> <div class="highlight"><pre><span></span><code>git clone https://github.com/gmarik/vundle.git ~/.vim/bundle/vundle
</code></pre></div> <p>Put this in your .vimrc (preferably at the&nbsp;beginning):</p> <div class="highlight"><pre><span></span><code><span class="k">set</span> <span class="nb">nocompatible</span>               <span class="c">&quot; be iMproved</span>
<span class="k">filetype</span> off                   <span class="c">&quot; required!</span>

<span class="k">set</span> <span class="nb">rtp</span><span class="p">+=~</span><span class="sr">/.vim/</span>bundle<span class="sr">/vundle/</span>
<span class="k">call</span> vundle#rc<span class="p">()</span>

<span class="c">&quot; let Vundle manage Vundle</span>
<span class="c">&quot; required! </span>
Bundle <span class="s1">&#39;gmarik/vundle&#39;</span>

<span class="c">&quot; My Bundles here:</span>
<span class="c">&quot;</span>
<span class="c">&quot; original repos on github</span>
Bundle <span class="s1">&#39;majutsushi/tagbar&#39;</span>
Bundle <span class="s1">&#39;altercation/vim-colors-solarized&#39;</span>

<span class="c">&quot; Github repos of the user &#39;vim-scripts&#39;</span>
<span class="c">&quot; =&gt; can omit the username part</span>
Bundle <span class="s1">&#39;L9&#39;</span>
Bundle <span class="s1">&#39;FuzzyFinder&#39;</span>

<span class="c">&quot; non github repos</span>
Bundle <span class="s1">&#39;git://git.wincent.com/command-t.git&#39;</span>
<span class="c">&quot; ...</span>

<span class="k">filetype</span> plugin indent <span class="k">on</span>     <span class="c">&quot; required!</span>
</code></pre></div> <p>Relaunch vim, run <code>:BundleInstall</code> to install the &#8220;bundles&#8221; you listed in .vimrc. When you want to update them, <code>:BundleUpdate</code>. To remove a plugin, just delete its line in your .vimrc file then relaunch vim and run <code>:BundleClean</code> to remove its folder inside&nbsp;~/.vim/bundle/</p> <p>Vundle follows Pathogen&#8217;s approach: putting plugins in their separate directories. However, it also takes care of the git stuff for us too! Note that by default it uses <code>git clone</code>, not <code>git add submodule</code> to add plugins. If you&#8217;re using Windows, there&#8217;s Vundle for Windows too, though I&#8217;ve never tried&nbsp;it.</p> <p>That&#8217;s it, happy coding! Feel free to leave your comments if there&#8217;s anything wrong/unclear&nbsp;here.</p> </article> </div> <h2 id="comments">Comments</h2> <div id="disqus_thread"> <button id="showCommentBtn">Show comments via Disqus</button> <noscript><br>(enable JavaScript first though)</noscript> </div> <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    // These need to be defined in the outermost scope, apparently.
    var disqus_shortname = 'nerdyweekly';
    var disqus_identifier = '/posts/modern-vim-plugin-management-pathogen-vs-vundle-vi/';
    var disqus_url = 'https://hi.imnhan.com/posts/modern-vim-plugin-management-pathogen-vs-vundle-vi/';
    var disqus_title = 'Quản lý plugin trong vim - Pathogen vs Vundle';

    document.querySelector('#showCommentBtn').addEventListener('click', function (event) {
        // Immediate visual feedback is always good:
        event.target.disabled = true;
        event.target.innerHTML = 'Loading comments...';

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    });
</script> </div> <footer> &copy; 2013–2021 Bùi Thành Nhân <br> Built with &#9829; and probably too much <a target="_blank" rel="noopener" href="https://www.thecoffeehouse.com/products/ca-phe-arabica">Coffee House</a>. <p style="color: beige; font-size: .7rem; margin: 0;"> Bored? Try entering the Konami code (PC only). </p> </footer> </div> <script src="/theme/konami.js"></script> </body> </html>